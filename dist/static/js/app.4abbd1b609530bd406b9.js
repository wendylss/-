webpackJsonp([1],{"1tNG":function(t,e){},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("7+uW"),a={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var n=s("VU/8")({name:"App"},a,!1,function(t){s("ZEO7")},null,null).exports,l=s("/ocq"),r=s("c/Tr"),o=s.n(r),h=s("lHA8"),c=s.n(h),u=s("vwbq"),p=s("jvAH"),g=s.n(p),d={data:function(){return{allD:"贾演,贾代化,父亲,贾家宁国府,贾家宁国府#贾代化,贾演,儿子,贾家宁国府,贾家宁国府#贾敬,贾代化,儿子,贾家宁国府,贾家宁国府#贾代化,贾敬,父亲,贾家宁国府,贾家宁国府#焦大,贾演,老奴,贾家宁国府,贾家宁国府#贾演,焦大,主人,贾家宁国府,贾家宁国府#贾珍,贾敬,儿子,贾家宁国府,贾家宁国府#贾敬,贾珍,父亲,贾家宁国府,贾家宁国府#尤氏,贾珍,妻,贾家宁国府,贾家宁国府#贾珍,尤氏,丈夫,贾家宁国府,贾家宁国府#佩凤,贾珍,妾,贾家宁国府,贾家宁国府#偕鸾,贾珍,妾,贾家宁国府,贾家宁国府#贾蓉,贾珍,儿子,贾家宁国府,贾家宁国府#贾珍,贾蓉,父亲,贾家宁国府,贾家宁国府#秦可卿,贾蓉,妻,贾家宁国府,贾家宁国府#贾蓉,秦可卿,丈夫,贾家宁国府,贾家宁国府#瑞珠,秦可卿,丫环,贾家宁国府,贾家宁国府#宝珠,秦可卿,丫环,贾家宁国府,贾家宁国府#入画,贾惜春,丫环,贾家宁国府,贾家宁国府#贾珍,贾惜春,父亲,贾家宁国府,贾家宁国府#贾惜春,贾珍,女儿,贾家宁国府,贾家宁国府#尤氏,贾惜春,母亲,贾家宁国府,贾家宁国府#贾惜春,尤氏,女儿,贾家宁国府,贾家宁国府#贾源,贾代善,父亲,贾家荣国府,贾家荣国府#贾演,贾源,兄弟,贾家宁国府,贾家荣国府#贾代善,贾源,儿子,贾家荣国府,贾家荣国府#贾母,贾代善,妻,史家,贾家荣国府#贾代善,贾母,丈夫,贾家荣国府,史家#贾代善,贾政,父亲,贾家荣国府,贾家荣国府#贾政,贾代善,儿子,贾家荣国府,贾家荣国府#贾代善,贾赦,父亲,贾家荣国府,贾家荣国府#贾赦,贾代善,儿子,贾家荣国府,贾家荣国府#贾赦,贾母,儿子,贾家荣国府,史家#贾母,贾赦,母亲,史家,贾家荣国府#邢夫人,贾赦,妻,贾家荣国府,贾家荣国府#贾赦,邢夫人,丈夫,贾家荣国府,贾家荣国府#邢夫人,贾母,大儿媳,贾家荣国府,史家#贾母,邢夫人,婆婆,史家,贾家荣国府#贾政,贾母,儿子,贾家荣国府,史家#王夫人,贾母,小儿媳,王家,史家#鸳鸯,贾母,丫头,贾家荣国府,史家#林如海,贾敏,丈夫,林家,贾家荣国府#贾敏,林如海,妻,贾家荣国府,林家#林如海,林黛玉,父亲,林家,林家#林黛玉,林如海,女儿,林家,林家#贾敏,林黛玉,母亲,贾家荣国府,林家#贾母,林黛玉,外祖母,史家,林家#林黛玉,贾母,外孙女,林家,史家#紫鹃,贾母,丫头,贾家荣国府,史家#雪雁,林黛玉,丫头,贾家荣国府,林家#王熙凤,邢夫人,儿媳,王家,贾家荣国府#邢夫人,王熙凤,婆婆,贾家荣国府,王家#秋桐,贾赦,丫环,贾家荣国府,贾家荣国府#秋桐,贾赦,妾,贾家荣国府,贾家荣国府#贾琏,贾赦,儿子,贾家荣国府,贾家荣国府#贾赦,贾琏,父亲,贾家荣国府,贾家荣国府#王熙凤,贾琏,妻,王家,贾家荣国府#贾琏,王熙凤,丈夫,贾家荣国府,王家#贾迎春,贾赦,女儿,贾家荣国府,贾家荣国府#贾赦,贾迎春,父亲,贾家荣国府,贾家荣国府#贾迎春,孙绍祖,妻,贾家荣国府,其他#巧姐,王熙凤,女儿,贾家荣国府,王家#巧姐,贾琏,女儿,贾家荣国府,贾家荣国府#巧姐,刘姥姥,被抚养,贾家荣国府,其他#贾琏,巧姐,父亲,贾家荣国府,贾家荣国府#王熙凤,巧姐,母亲,王家,贾家荣国府#王熙凤,王夫人,内侄女,王家,王家#尤二姐,尤氏继母,女儿,贾家宁国府,贾家宁国府#尤二姐,贾琏,二房,贾家宁国府,贾家荣国府#王夫人,贾政,妻,王家,贾家荣国府#贾政,王夫人,丈夫,贾家荣国府,王家#赵姨娘,贾政,妾,贾家荣国府,贾家荣国府#王夫人,薛姨妈,姐妹,王家,王家#薛姨妈,王夫人,姐妹,王家,王家#金钏,王夫人,大丫环,贾家荣国府,王家#彩云,王夫人,大丫头,贾家荣国府,王家#彩霞,王夫人,大丫头,贾家荣国府,王家#玉钏儿,金钏儿,妹妹,贾家荣国府,贾家荣国府#金钏儿,玉钏儿,姐姐,贾家荣国府,贾家荣国府#玉钏儿,王夫人,丫头,贾家荣国府,王家#贾珠,王夫人,儿子,贾家荣国府,王家#贾珠,贾政,儿子,贾家荣国府,贾家荣国府#王夫人,贾珠,母亲,王家,贾家荣国府#贾政,贾珠,父亲,贾家荣国府,贾家荣国府#贾珠,李纨,丈夫,贾家荣国府,贾家荣国府#李纨,贾珠,妻,贾家荣国府,贾家荣国府#贾兰,贾珠,儿子,贾家荣国府,贾家荣国府#贾兰,李纨,儿子,贾家荣国府,贾家荣国府#贾元春,贾政,女儿,贾家荣国府,贾家荣国府#贾政,贾元春,父亲,贾家荣国府,贾家荣国府#贾元春,王夫人,女儿,贾家荣国府,王家#王夫人,贾元春,母亲,王家,贾家荣国府#贾宝玉,贾政,儿子,贾家荣国府,贾家荣国府#贾政,贾宝玉,父亲,贾家荣国府,贾家荣国府#贾元春,贾宝玉,姐姐,贾家荣国府,贾家荣国府#贾宝玉,王夫人,儿子,贾家荣国府,王家#王夫人,贾宝玉,母亲,王家,贾家荣国府#贾宝玉,薛宝钗,丈夫,贾家荣国府,薛家#薛宝钗,贾宝玉,妻,薛家,贾家荣国府#薛宝钗,薛姨妈,女儿,薛家,王家#袭人,贾宝玉,丫环,贾家荣国府,贾家荣国府#麝月,贾宝玉,丫环,贾家荣国府,贾家荣国府#秋纹,贾宝玉,丫环,贾家荣国府,贾家荣国府#晴雯,贾宝玉,丫环,贾家荣国府,贾家荣国府#坠儿,贾宝玉,丫环,贾家荣国府,贾家荣国府#四儿,贾宝玉,丫环,贾家荣国府,贾家荣国府#柳五儿,芳官,好朋友,贾家荣国府,贾家荣国府#柳五儿,贾宝玉,丫环,贾家荣国府,贾家荣国府#茗烟,贾宝玉,小厮,贾家荣国府,贾家荣国府#贾环,贾政,儿子,贾家荣国府,贾家荣国府#贾政,贾环,父亲,贾家荣国府,贾家荣国府#贾环,赵姨娘,儿子,贾家荣国府,贾家荣国府#赵姨娘,贾环,母亲,贾家荣国府,贾家荣国府#贾探春,贾政,女儿,贾家荣国府,贾家荣国府#贾政,贾探春,父亲,贾家荣国府,贾家荣国府#贾探春,赵姨娘,女儿,贾家荣国府,贾家荣国府#赵姨娘,贾探春,母亲,贾家荣国府,贾家荣国府#贾蔷,贾珍,养子,贾家宁国府,贾家宁国府#金文翔,鸳鸯,哥哥,其他,贾家荣国府#金文翔,贾母,买办,其他,史家#金文翔家的,鸳鸯,嫂子,其他,贾家荣国府#周瑞家的,王夫人,陪房,其他,王家#王善保家的,邢夫人,陪房,其他,贾家荣国府#林之孝,林红玉,父,其他,其他#林之孝家的,林红玉,母,其他,其他#李嬷嬷,贾宝玉,乳母,其他,贾家荣国府#李嬷嬷,李贵,母,其他,其他#傻大姐,贾母,丫头,其他,史家#芳官,贾宝玉,丫环,贾家荣国府,贾家荣国府#龄官,贾蔷,相好,其他,贾家宁国府#藕官,药官,相好,其他,其他#藕官,林黛玉,丫环,其他,林家#赖嬷嬷,赖大,母亲,其他,贾家宁国府#赖尚荣,赖嬷嬷,孙子,其他,其他#吴贵,晴雯,姑舅哥哥,其他,贾家荣国府#薛蟠,薛姨妈,儿子,薛家,王家#薛姨妈,薛蟠,母亲,王家,薛家#薛蝌,薛姨妈,侄儿,薛家,王家#邢岫烟,薛蝌,妻,其他,薛家#薛宝琴,薛姨妈,侄女,薛家,王家#薛姨妈,薛宝琴,姑母,王家,薛家#薛宝琴,薛蝌,胞妹,薛家,薛家#夏金桂,薛蟠,妻,薛家,薛家#香菱,薛蟠,妾,其他,薛家#香菱,甄士隐,女儿,其他,其他#甄士隐,香菱,父亲,其他,其他#宝蟾,夏金桂,陪房丫头,其他,薛家#邢岫烟,邢忠,女儿,其他,其他#邢岫烟,邢夫人,侄女,其他,贾家荣国府#莺儿,薛宝钗,丫头,其他,薛家#刘姥姥,王狗儿,岳母,其他,其他#贾雨村,林黛玉,老师,其他,林家#娇杏,贾雨村,二夫人,其他,其他#封肃,甄士隐,岳父,其他,其他#甄宝玉,甄应嘉,儿子,其他,其他#妙玉,林黛玉,朋友,其他,林家#妙玉,贾宝玉,朋友,其他,贾家荣国府#柳湘莲,薛蟠,好兄弟,其他,薛家#蒋玉菡,贾宝玉,好友,其他,贾家荣国府#蒋玉菡,袭人,夫妻,其他,贾家荣国府#冷子兴,周瑞家的,女婿,其他,其他#冷子兴,贾雨村,好友,其他,其他#马道婆,贾宝玉,乾娘,其他,贾家荣国府#智能儿,秦钟,暧昧,其他,其他#尤三姐,尤氏继母,女儿,贾家宁国府,贾家宁国府#尤三姐,尤二姐,妹妹,贾家宁国府,贾家宁国府#尤三姐,尤二姐,妹妹,贾家宁国府,贾家宁国府#秦钟,秦邦业,儿子,其他,其他#秦邦业,秦钟,父亲,其他,其他#秦邦业,秦可卿,养父,其他,贾家宁国府#史湘云,贾宝玉,朋友,史家,贾家荣国府#史湘云,林黛玉,朋友,史家,林家#史湘云,薛宝钗,朋友,史家,薛家#史湘云,贾母,孙女,史家,史家#王子腾,王熙凤,伯父,王家,王家#贾宝玉,林黛玉,表兄妹,贾家荣国府,林家#林黛玉,贾宝玉,表兄妹,林家,贾家荣国府#李纨,贾宝玉,嫂子,贾家荣国府,贾家荣国府#贾珠,贾宝玉,哥哥,贾家荣国府,贾家荣国府#贾敏,贾母,女儿,贾家荣国府,史家#贾敏,贾政,兄妹,贾家荣国府,贾家荣国府#贾敏,贾赦,兄妹,贾家荣国府,贾家荣国府#贾政,贾赦,兄弟,贾家荣国府,贾家荣国府#贾宝玉,贾珠,弟弟,贾家荣国府,贾家荣国府#贾代善,贾宝玉,爷爷,贾家荣国府,贾家荣国府#贾宝玉,贾代善,孙子,贾家荣国府,贾家荣国府#贾母,贾宝玉,奶奶,史家,贾家荣国府#秦钟,贾宝玉,朋友,其他,贾家荣国府",nodes:[],edges:[],Arr:[],statusName:["贾家宁国府","贾家荣国府","史家","王家","林家","薛家","其他"],status:["JN","JR","S","W","L","X","else"],input1:"",input2:"",options:[{value:"1",label:"一代关系"},{value:"2",label:"二代关系"},{value:"3",label:"所有关系"},{value:"4",label:"两者关系"}],value:"",inputName:!0,message:"",success:"0"}},mounted:function(){this.Arr=this.allD.split("#"),this.loadData()},methods:{loadData:function(){this.nodes=[],this.edges=[];for(var t=0;t<this.Arr.length;t++){for(var e=this.Arr[t].split(","),s=0;s<2;s++)e[s+3]=this.switch(e[s+3]);this.nodes.push({name:e[0],status:e[3]}),this.nodes.push({name:e[1],status:e[4]}),this.edges.push({source:e[0],target:e[1],label:e[2]})}var i=new c.a(this.nodes);this.nodes=o()(i),this.init()},switch:function(t){switch(t){case"贾家宁国府":t=0;break;case"贾家荣国府":t=1;break;case"史家":t=2;break;case"王家":t=3;break;case"林家":t=4;break;case"薛家":t=5;break;case"其他":t=6}return t},clear:function(){this.setAllNodesStyle("stroke-width: 1px;"),this.setAllEdgesStyle("stroke-width: 1px"),this.message="",this.input1="",this.input2=""},setAllNodesStyle:function(t){var e=this;this.graph.nodes().forEach(function(s){e.setNodeStyle(s,t)})},setAllEdgesStyle:function(t){var e=this;this.graph.edges().forEach(function(s){e.setEdgeStyle(s,t)})},setNodeStyle:function(t,e){this.graph.node(t).elem.style=e},setEdgeStyle:function(t,e){this.graph.edge(t).elem.style=e},init:function(){var t=this;u.select("#container").append("svg").attr("id","svg-canvas").append("g"),this.graph=new g.a.graphlib.Graph,this.graph.setGraph({rankdir:this.direction}).setDefaultEdgeLabel(function(){return{}}),this.nodes.forEach(function(e){t.graph.setNode(e.name,{label:e.name,id:e.name,shape:"circle",class:t.status[e.status]})}),this.edges.forEach(function(e){t.graph.setEdge(e.source,e.target,{label:e.label,curve:u.curveBasis})});var e=u.select("svg"),s=e.select("g"),i=u.zoom().on("zoom",function(){s.attr("transform",u.event.transform)});e.call(i),(new g.a.render)(u.select("svg").select("g"),this.graph);var a=(u.select("svg")._groups[0][0].clientWidth>u.select("svg")._groups[0][0].clientHeight?u.select("svg")._groups[0][0].clientWidth:u.select("svg")._groups[0][0].clientHeight)/6e3,n=(u.select("svg")._groups[0][0].clientWidth-this.graph.graph().width*a)/2,l=(u.select("svg")._groups[0][0].clientHeight-this.graph.graph().height*a)/2;u.select("svg").call(i.transform,u.zoomIdentity.translate(n,l).scale(a))},changeSelect:function(){"4"===this.value?this.inputName=!1:this.inputName=!0},onSubmit:function(){var t=this;if("3"===this.value&&188!==this.edges.length&&(u.select("svg").remove(),this.loadData()),"1"===this.value&&""!==this.input1&&(this.nodes=[],this.edges=[],this.findRelation(this.input1),u.select("svg").remove(),this.init(),this.setNodeStyle(this.input1,"stroke-width: 6px;")),"2"===this.value&&""!==this.input1){this.nodes=[],this.edges=[],this.findRelation(this.input1);var e=this.nodes;this.nodes=[],this.edges=[];for(var s=0;s<e.length;s++)this.findRelation(e[s].name);u.select("svg").remove(),this.init(),this.setNodeStyle(this.input1,"stroke-width: 8px;")}"4"===this.value&&""!==this.input1&&""!==this.input2&&(188!==this.edges.length&&(u.select("svg").remove(),this.loadData()),this.setNodeStyle(this.input1,"stroke-width: 10px;"),this.setNodeStyle(this.input2,"stroke-width: 10px;"),this.edges.forEach(function(e){e.source===t.input2&&e.target===t.input1&&(t.success=1,t.message=t.input2+"是"+t.input1+"的"+e.label,t.setEdgeStyle({v:e.source,w:e.target},"stroke-width: 7px"))}),"0"===this.success&&this.bfs(this.input2,this.input1))},bfs:function(t,e){var s=this,i=0,a=[];this.edges.forEach(function(e){e.source===t&&(a.push(e.source+"#"+e.target),s.setEdgeStyle({v:e.source,w:e.target},"stroke-width: 7px"))}),console.log(a);for(var n=0,l=0;!n;l++){7===l&&(this.message="系统还在计算，两者可能无关系！");for(var r=a.length,o=0;o<r&&!n;o++){if(""===a[0]){this.message="两者没有关系！",n=1;break}var h=a[0].split("#"),c=function(t){if(s.edges[t].source===h[h.length-1]){if(h.includes(s.edges[t].target))return"continue";a.push(a[0]+"#"+s.edges[t].target);var r=s;if(setTimeout(function(){r.setEdgeStyle({v:r.edges[t].source,w:r.edges[t].target},"stroke-width: 7px")},1500*(l+1)),i=1500*(l+1),s.edges[t].target===e)return n=1,"break"}};t:for(var u=0;u<this.edges.length;u++){switch(c(u)){case"continue":continue;case"break":break t}}a.splice(0,1)}console.log(a)}this.showTrack(a,i)},showTrack:function(t,e){var s=this;setTimeout(function(){var e=t[t.length-1].split("#");s.setAllEdgesStyle("stroke-width: 1px");for(var i=0;i<e.length;i++)s.edges.forEach(function(t){t.source===e[i]&&t.target===e[i+1]&&(s.setEdgeStyle({v:t.source,w:t.target},"stroke-width: 7px"),console.log(t),s.message=s.message+" "+t.source+"是"+t.target+"的"+t.label)})},e+1500)},findRelation:function(t){for(var e=0;e<this.Arr.length;e++){var s=this.Arr[e].split(",");if(t===s[0]||t===s[1]){for(var i=0;i<2;i++)s[i+3]=this.switch(s[i+3]);this.nodes.push({name:s[0],status:s[3]}),this.nodes.push({name:s[1],status:s[4]}),this.edges.push({source:s[0],target:s[1],label:s[2]})}}}}},v={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("p",[t._v("《红楼梦》家族人物关系推理系统")]),t._v(" "),s("p",{staticStyle:{position:"absolute",top:"60px",right:"30px","font-weight":"normal"}},[t._v(t._s(t.message))]),t._v(" "),s("el-button",{staticStyle:{margin:"5px 10px 0 0",float:"right"},attrs:{type:"info"},on:{click:t.clear}},[t._v("清空")]),t._v(" "),s("el-button",{staticStyle:{margin:"5px 10px 0 0",float:"right"},attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("查询")]),t._v(" "),s("el-select",{staticStyle:{width:"150px",margin:"5px 10px 0 0",float:"right",display:"block"},attrs:{placeholder:"所有关系"},on:{change:function(e){return t.changeSelect()}},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.options,function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1),t._v(" "),s("el-input",{staticStyle:{width:"150px",margin:"5px 10px 0 0",float:"right"},attrs:{placeholder:"请输入人物名称"},model:{value:t.input1,callback:function(e){t.input1=e},expression:"input1"}}),t._v(" "),s("el-input",{staticStyle:{width:"150px",margin:"5px 10px 0 0",float:"right"},attrs:{placeholder:"请输入人物名称",disabled:t.inputName},model:{value:t.input2,callback:function(e){t.input2=e},expression:"input2"}}),t._v(" "),s("div",{attrs:{id:"container"}}),t._v(" "),t._m(0)],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("ul",[s("li",{staticStyle:{display:"inline","margin-right":"20px"}},[s("i",{staticClass:"point1"},[t._v("贾家宁国府")])]),t._v(" "),s("li",{staticStyle:{display:"inline","margin-right":"20px"}},[s("i",{staticClass:"point2"},[t._v("贾家荣国府")])]),t._v(" "),s("li",{staticStyle:{display:"inline","margin-right":"20px"}},[s("i",{staticClass:"point3"},[t._v("史家")])]),t._v(" "),s("li",{staticStyle:{display:"inline","margin-right":"20px"}},[s("i",{staticClass:"point4"},[t._v("王家")])]),t._v(" "),s("li",{staticStyle:{display:"inline","margin-right":"20px"}},[s("i",{staticClass:"point5"},[t._v("林家")])]),t._v(" "),s("li",{staticStyle:{display:"inline","margin-right":"20px"}},[s("i",{staticClass:"point6"},[t._v("薛家")])]),t._v(" "),s("li",{staticStyle:{display:"inline"}},[s("i",{staticClass:"point7"},[t._v("其他")])])])])}]};var f=s("VU/8")(d,v,!1,function(t){s("1tNG")},null,null).exports;i.default.use(l.a);var m=new l.a({routes:[{path:"/index",name:"index",component:f}]}),y=s("zL8q"),_=s.n(y);s("tvR6");i.default.config.productionTip=!1,i.default.use(_.a),new i.default({el:"#app",router:m,components:{App:n},template:"<App/>"})},ZEO7:function(t,e){},tvR6:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.4abbd1b609530bd406b9.js.map